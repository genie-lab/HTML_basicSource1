<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel='stylesheet' type='text/css' media='screen' href='css/main07-api.css'>
    <title>HTML 5,6강</title>
</head>
<body onload="init()">
  <header>
       <!------------------------------- 목차 --------------------------------->
          <span class="mr30"><a href="#audio-tag">&lt;audio&gt; 태그</a></span>
          <span class="mr30"><a href="#video-tag">&lt;video&gt; 태그</a></span>
          <span class="mr30"><a href="#form-tag">&lt;form&gt; 태그</a></span>
          <span><a href="#reguler-expression">정규식</a></span>
  </header>


  <main>
    <!-------------------------------오디오 요소 --------------------------------->
    <h2 id="audio-tag">&lt;audio&gt; 태그</h2> <br/>
    <table style="width: 80%;">
      <colgroup>
        <col style="width: auto;">
      </colgroup>
      <thead>
        <th>설명</th>
        <th>실습</th>
      </thead>
      <tbody>
        <tr>
          <td style="padding:10px 40px 10px 50px; text-align: left;">
            <h4>&lt;embed&gt; 태그</h4> 
            <ul style="text-align: left;">
              <li>플러그인을 사용하여 표시되는 데이터나 동영상을 웹 페이지에 삽입</li>
              <li>embed 외부 애플리케이션이나 상호작용 콘텐츠를 위한 컨테이너<br/> html5 새롭게 추가</li>
              <li>속성 -> src, height, width, type=MediaType</li>
            </ul>
          </td>
          <td>
            <embed width="480" height="320" src="https://www.youtube.com/embed/cfHWIqJkEf4"><br/>
              오디오 재생: <br/>
            <embed src="./file/music.mp3" type="audio/mpeg" ><br/>
              비디오 재생: <br/>
            <embed src="./file/Mountains.mp4" width="400" height="300" type="video/mp4">
          </td>
        </tr>
        <tr>
          <td colspan="2" style="padding:10px 0px 10px 50px; text-align: left;">
            <h4>&lt;audio&gt; 태그</h4> 
            <ul>
              <li>외부 플러그인 도움없이 간단히 오디오 재생</li>
              <li>속성
                <ul style="margin-left: 30px;">
                  <li>src=재생할 오디오 파일 URL</li>
                  <li>autoplay=웹문서 로딩시 오디오 자동재생</li>
                  <li>controls속성은 재생, 일시 중지 및 볼륨과 같은 오디오 컨트롤</li>
                  <li>loop=오디오 반복재생</li>
                  <li>muted=음소거</li>
                  <li>preload=
                    <ul style="margin-left: 30px;">
                      <li>none:사용자가 재생시작전까지 웹브라우저가 오디오파일을 미리 로드하지 않음</li>
                      <li>auto:(기본)페이지가 로드될때 바로 전체 파일을 자동으로 로드</li>
                      <li>metadata:사용자가 재생시키기전까지는 오디오 메타정보(크기, 첫 프레임등)만 로드</li>
                      <li>######## autoplay 속성이 지정되면 preload는 무시됨 #########</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>&lt;audio&gt;와 &lt;/audio&gt;태그 사이의 텍스트 는 &lt;audio&gt;요소를 지원하지 않는 브라우저에서만 표시.</li>
              <li>오디오 파일을 자동으로 시작하려면 다음 autoplay속성을 사용함.</li>
              <li>Chrome 브라우저는 대부분의 경우 자동 재생을 허용안함. 음소거 된 자동 재생은 항상 허용.<br/>
                오디오 파일이 자동으로 재생되도록하려면 muted뒤에 추가 autoplay (그러나 음소거 됨).
              </li>
              <li>HTML 오디오 형식(File Format)/유형(Media Type) 
                <ul style="margin-left: 30px;">
                  <li>MP3 -> audio/mpeg</li>
                  <li>WAV -> audio/wav</li>
                  <li>OGG -> audio/ogg</li>
                </ul>
              </li>
              <li>&lt;source&gt;태그를 사용하면 브라우저가 선택할 수있는 대체 오디오 파일을 지정.<br/> 브라우저는 처음으로 인식 된 형식을 사용.<br/>
                &lt;audio&gt;와 &lt;video&gt; 태그의 src 속성의 역할을 대신함 <br/>
                속성 : src -> 경로, type -> 재생파일 MIME형식(Multipurpose Internet Mail Extensions:: 파일변환)
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td><span class="mr50" style="position: relative; bottom: 20px;">audio 태그 및 source 태그 controls muted 속성</span>
            <audio controls muted> 
              <source src="./file/music.mp3" type="audio/ogg">
              <source src="./file/music.mp3" type="audio/mpeg">
              <source src="./file/music.mp3" type="audio/wav">
              <source src="./file/music.mp3" type="audio/mp3">
                Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <span class="mr50" style="position: relative; bottom: 20px;">loop 추가(연속재생)</span>
            <audio controls loop preload="metadata">
              <source src="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4" type="audio/ogg">
              <source src="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
      </tbody>
    </table><br/><br/><br/>


    <!-------------------------------비디오 요소 --------------------------------->
    <!--오른 하단 세개 점 : PIP는 주로 동영상 재생에 사용되는 특수한 유형의 멀티 윈도우 모드-->
    <h2 id="video-tag">&lt;video&gt; 태그</h2><br/>
    <table>
      <colgroup>
        <col style="width: auto;">
      </colgroup>
      <tbody>
        <tr>
          <th>poster 속성 적용 : 미리 보여줄 정적이미지</th>
          <th>source 태그 적용</th>
        </tr>
        <tr>
          <td>
            <video src ="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4" controls
              width="400px" height ="250px" poster="./img/sun.jpg">
              현재의 브라우저는 video 요소를 지원하지 않습니다
            </video>
          </td>
          <td>
            <video controls autoplay loop preload="metadata" width="400px" height="250px" poster="./img/sun.jpg">
              <source src="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4" type="video/ogg">
              <source src="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4" type="video/mp4">
              <source src="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4" type="video/webm">
                Your browser does not support the audio element.
            </video>
          </td>
        </tr>

        <tr>
          <th>재생구간 지정 5초에서 10초까지</th>
          <th>재생구간 지정 처음부터 10초까지</th>
        </tr>
        <tr>
          <td>
            <video src ="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4 #t=5,10"  controls
              width="400px" height ="250px" poster="./img/sun.jpg">
              현재의 브라우저는 video 요소를 지원하지 않습니다
            </video>
          </td>
          <td>
            <video src ="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4 #t=,10"  controls
              width="400px" height ="250px" poster="./img/sun.jpg">
              현재의 브라우저는 video 요소를 지원하지 않습니다
            </video>
          </td>
        </tr>

        <tr>
            <th>재생구간 지정 20초부터 시작</th>
            <th>재생구간 지정 00:00:01에서 00:02:45까지</th>
        </tr>
        <tr>
            <td>
              <video src ="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4 #t=20"  controls
              width="400px" height ="250px" poster="./img/sun.jpg">
              현재의 브라우저는 video 요소를 지원하지 않습니다
            </video>
            </td>
            <td>
              <video src ="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4 #t=00:00:01,00:02:45"  controls
              width="400px" height ="250px" poster="./img/sun.jpg">
              현재의 브라우저는 video 요소를 지원하지 않습니다
            </video>
            </td>
        </tr>
        <tr>
          <th>자막처리를 위한 &lt;track&gt; 태그</th>
          <th>자막처리를 위한 &lt;track&gt; kind 속성</th>
      </tr>
        <tr>
          <td>
            <!--http://caption.devco.kr/ 자막만들기 Web Video Text Track-->
            <!--http://cutegenie.dothome.co.kr/03.html chrome에서는 실행안됨 웹서버에 올려야함자막 -->
            <video src="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4" autoplay loop controls width="400px" height ="250px"> 
              <track src="./file/subtitle/subtitle.ko.vtt" kind="subtitles" srclang="kr" label="기본한국어" default>
              <track src="./file/subtitle/subtitle.en.vtt" kind="subtitles" srclang="en" label="영어자막">
              Sorry, your browser doesn't support embedded videos
            </video>
          </td>
          <td style="all: unset;">
            <table> 
              <tr >
                <td><b>&nbsp;subtitles&nbsp; </b></td>
                <td >비디오의 자막을 정의 대화를 글로 옮기거나 번역한 것<br/> 
                  소리는 들리지만 언어를 이해할 수 없는 경우에 적합
                </td>
              </tr>
              <tr>
                <td><b>&nbsp;captions&nbsp; </b></td>
                <td>대화나 사운드 효과를 글로 옮기거나 번역한 것<br/> 
                  소리를 또렷하게 알아들을 수 없는 청각이 약한 사람에게 적합
                </td>
              </tr>
              <tr>
                <td><b>&nbsp;descriptions&nbsp; </b></td>
                <td> 비디오 내용에 대한 텍스트 형식의 설명을 정의<br/>
                  시각 장애를 가진 사람에게 적합
                </td>
              </tr>
              <tr>
                <td><b>&nbsp;chapters&nbsp; </b></td>
                <td> 장의 제목을 정의<br/>
                  미디어 자원을 탐색하기 위한 것
                </td>
              </tr>
              <tr>
                <td><b>&nbsp;metadata&nbsp; </b></td>
                <td> 스크립트에서 사용하기 위한 내용을 정의<br/>
                  브라우저에는 표시되지 않음
                </td>
              </tr>
            </table>
          </td>
      </tr>
    </table>
    <br/>
    <br/>

    <!---비디오 제어-->
    <div style="text-align:center">
      <button id="begin" onclick="playPause()">재생하기</button>
      <button onclick="sizeUp()">큰 화면(50씩 커짐)</button>
      <button onclick="sizeDown()">작은 화면(50씩 작아짐)</button>
      <button onclick="sizeNormal()">원래 크기(350)의 화면</button>
      <br><br>
      <video id="video" width="350">
      이 브라우저는 video 요소를 지원하지 않습니다.
      </video>
      <br><br>
    </div>
   
    <script>

      function init(){
        //비디오제어
        start();
        //오디오제어
        initStart();
      }

      let myVideo;
      function start() {
        myVideo = document.getElementById("video");
        const begin = document.getElementById('begin');
        const isSupp = myVideo.canPlayType("video/mp4");
        if (isSupp != "") {
          myVideo.src="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4";
          myVideo.load();
        }
      }

      function playPause() {
        if (myVideo.paused) {
          console.log('stop');
          myVideo.play(); 
          begin.textContent="일시정지"
          
        } else {
          myVideo.pause(); 
          console.log('start');
          begin.textContent="재생하기"
        }
      }

      function sizeUp() { myVideo.width += 50; }
      function sizeDown() { myVideo.width -= 50; }
      function sizeNormal() { myVideo.width = 350; }
    </script>


<!--미디어파일의 제어 및 상태관련 속성-->
<table style="width: 80%;">
  <colgroup>
    <col style="width: auto;">
  </colgroup>
  <thead>
    <th>속성</th>
    <th>내용</th>
  </thead>
  <tbody>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> autoplay </td>
      <td>미디어 파일의 자동 재생 여부의 지정/반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> controls </td>
      <td>플레이어 표시 여부의 지정/반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> currentSrc </td>
      <td>재생 중인 미디어 파일의 URL 반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> currentTime </td>
      <td>현재 재생 위치를 초 단위로 지정/반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> defaultMuted </td>
      <td>기본 음소거 상태의 지정/반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> defaultPlaybackRate </td>
      <td> 기본 재생 속도의 지정/반환 (기본 1.0)</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> duration </td>
      <td> 미디어 파일의 총 재생 시간을 초 단위로 반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> ended </td>
      <td>미디어 파일의 재생이 종료되었는지를 반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> error </td>
      <td> 미디어 파일의 오류 상태 반환 (error.code 값)</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> loop </td>
      <td>반복 재생 여부의 지정/반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> muted </td>
      <td> 음소거 여부의 지정/반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> networkState </td>
      <td>미디어 요소의 네트워크 접속 상태를 반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> paused </td>
      <td>미디어 파일의 일시정지 여부를 반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> playbackRate </td>
      <td>현재 재생 속도를 지정/반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> preload </td>
      <td>이미지가 로드될 때 파일의 로드 여부를 지정/반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> readyState </td>
      <td> 현재 재생 위치와 관련된 요소의 현재 상태를 반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> src </td>
      <td> 미디어 요소의 현재 파일의 경로를 지정/반환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> volume </td>
      <td> 미디어 파일의 볼륨의 지정/반환</td>
    </tr>   
  </tbody>
</table><br/><br/><br/>


<!--error 속성의 반환값-->
<table style="width: 80%;">
  <colgroup>
    <col style="width: auto;">
  </colgroup>
  <thead>
    <th>에러속성 반환값</th>
    <th>내용</th>
  </thead>
  <tbody>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> MEDIA_ERR_ABORTED, 1 </td>
      <td>미디어 파일을 가져오는 프로세스가 사용자에 의해 중지됨</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> MEDIA_ERR_NETWORK, 2 </td>
      <td>네트워크 오류로 다운로드가 중지됨</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> MEDIA_ERR_DECODE, 3 </td>
      <td>미디어 파일의 디코딩 중에 오류 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> MEDIA_ERR_SRC_NOT_SUPPORTED, 4 </td>
      <td>지원하지 않는 미디어 파일 형식</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;">NETWORK_EMPTY, 1 </td>
      <td>요소의 초기 상태를 표시</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;">NETWORK_IDLE, 2</td>
      <td>요소가 자원을 선택했지만, 실제 네트워크를 사용하고 있지 않은 상태</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;">NETWORK_LOADING, 3</td>
      <td>데이터가 로딩 중인 상태환</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> NETWORK_NO_SOURCE, 4 </td>
      <td>지원하지 않는 미디어 형식이어서 로드할 수 없는 상태</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> HAVE_NOTHING, 0 </td>
      <td>다운로드하지 않아 미디어 파일에 대한 정보가 없는 상태</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> HAVE_METADATA, 1 </td>
      <td>메타 데이터 다운로드가 완료된 상태</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> HAVE_CURRENT_DATA, 2 </td>
      <td>현재 재생 위치만큼 다운로드가 완료된 상태</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> HAVE_FUTURE_DATA, 3 </td>
      <td>현재 재생 위치에서 조금 더 재생할 수 있을 만큼 다운로드가 완료된 상태</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> HAVE_ENOUGH_DATA, 4 </td>
      <td>재생을 시작할 수 있을 정도의 충분한 데이터의 다운로드가 완료된 상태</td>
    </tr>
  </tbody>
</table><br/><br/><br/>


<!--미디어 관련 주요 이벤트-->
<table style="width: 80%;">
  <colgroup>
    <col style="width: auto;">
  </colgroup>
  <thead>
    <th>미디어 관련 주요 이벤트</th>
    <th>내용</th>
  </thead>
  <tbody>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> abort </td>
      <td>미디어 파일의 로딩이 중지되었을 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> canplay</td>
      <td>미디어 파일의 플레이를 시작할 수 있을 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> durationchange </td>
      <td> duration 속성이 변했을 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> ended</td>
      <td>재생이 종료되었을 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;">error </td>
      <td>로드 및 재생 과정에서 오류가 있을 경우 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;">loadstart</td>
      <td> 미디어 파일의 로드가 시작될 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;">pause</td>
      <td>미디어 파일이 일시정지되었을 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> play </td>
      <td>미디어 파일의 재생이 시작되었을 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> playing </td>
      <td>미디어 파일이 일시정지 또는 버퍼링을 위해 멈췄다가 재생을 시작할 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> progress</td>
      <td>미디어 파일을 다운로드하고 있을 때 지속적으로 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;">ratechange </td>
      <td>재생 속도(defaultPlaybackRate 속성, playbackRate 속성)가 변경되었을 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> seeked </td>
      <td>사용자가 미디어 파일의 새로운 위치로 이동하거나 건너뜀을 마쳤을 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;"> seeking</td>
      <td>사용자가 미디어 파일의 새로운 위치로 이동/건너뜀을 시작할 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;">timeupdate </td>
      <td>현재 재생 위치가 바뀌었을 때 발생 (재생 중에 지속적으로 발생)</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;">volumechange</td>
      <td> volume/muted 속성이 변경되었을 때 발생</td>
    </tr>
    <tr>
      <td style="padding:10px 40px 10px 50px; text-align: left;">waiting</td>
      <td>다음 프레임 데이터를 버퍼링하기 위해 미디어가 멈췄을 때 발생</td>
    </tr>
  </tbody>
</table><br/><br/><br/>

<audio id="player" src="./file/Moon River ViolinCelloPianoBreakfast at Tiffanys OST_1080p.mp4" controls></audio><br>
  <p>재생 상태 : <span id="playtime"></span></p>
  <p>음량 상태 : <span id="volume"></span></p>
  <button id="playPause" onclick="play()">재생하기</button>
  <button onclick="volumeUp()">볼륨 +</button>
  <button onclick="volumeDown()">볼륨 -</button>

<script>
  let player = document.getElementById('player');
  let btn = document.getElementById('playPause');

  function initStart() {
    document.getElementById('volume').innerHTML = Math.floor(player.volume*10);
  }
  function play() {
    if (player.paused) { player.play(); btn.innerHTML="일시정지"; 
    } else { 
      player.pause(); btn.innerHTML="재생하기"; 
    }
  }
  function volumeUp () { player.volume += 1; }
  function volumeDown () { player.volume -= 1; }

  player.addEventListener("volumechange", volumeState, false);

  function volumeState (e) {
    document.getElementById('volume').innerHTML = Math.floor(player.volume*10);
  }

  player.addEventListener("timeupdate", PlayTime, false);
  
  function PlayTime(e) {
    document.getElementById("playtime").innerHTML = Math.floor(player.currentTime)
    + "/" + Math.floor(player.duration);
  }
  player.onended = function () {
    document.getElementById("playtime").innerHTML = "재생이 종료되었습니다.";
    btn.innerHTML="재생하기";
  }

</script>
  


</main>  

   <!-- 홈으로 가는 버튼 -->
   <a class="no-underline" href="#audio-tag"><div class="box">home</div></a>
</body>
</html>